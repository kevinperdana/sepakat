(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f99813e"],{1105:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[e._v("USER PERMISSIONS")])]),s("v-card-text",[s("v-container",{attrs:{fluid:""}},[s("v-row",{staticClass:"mb-4",attrs:{"no-gutters":""}},[s("v-col",{attrs:{xs:"12",sm:"12",md:"12"}},[s("v-card",[s("v-card-text",[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[s("v-card",{attrs:{flat:""}},[s("v-card-title",[e._v("ID :")]),s("v-card-text",[e._v(" "+e._s(e.user.id)+" ")])],1)],1),e.$vuetify.breakpoint.xsOnly?s("v-responsive",{attrs:{width:"100%"}}):e._e(),s("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[s("v-card",{attrs:{flat:""}},[s("v-card-title",[e._v("NOMOR HP :")]),s("v-card-text",[e._v(" "+e._s(e.user.nomor_hp)+" ")])],1)],1),e.$vuetify.breakpoint.xsOnly?s("v-responsive",{attrs:{width:"100%"}}):e._e()],1),s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[s("v-card",{attrs:{flat:""}},[s("v-card-title",[e._v("USERNAME :")]),s("v-card-text",[e._v(" "+e._s(e.user.username)+" ")])],1)],1),e.$vuetify.breakpoint.xsOnly?s("v-responsive",{attrs:{width:"100%"}}):e._e(),s("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[s("v-card",{attrs:{flat:""}},[s("v-card-title",[e._v("THEME :")]),s("v-card-text",[e._v(" "+e._s(e.user.theme)+" ")])],1)],1),e.$vuetify.breakpoint.xsOnly?s("v-responsive",{attrs:{width:"100%"}}):e._e()],1),s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[s("v-card",{attrs:{flat:""}},[s("v-card-title",[e._v("NAMA :")]),s("v-card-text",[e._v(" "+e._s(e.user.name)+" ")])],1)],1),e.$vuetify.breakpoint.xsOnly?s("v-responsive",{attrs:{width:"100%"}}):e._e(),s("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[s("v-card",{attrs:{flat:""}},[s("v-card-title",[e._v("DEFAULT ROLE :")]),s("v-card-text",[e._v(" "+e._s(e.user.default_role)+" ")])],1)],1),e.$vuetify.breakpoint.xsOnly?s("v-responsive",{attrs:{width:"100%"}}):e._e()],1),s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[s("v-card",{attrs:{flat:""}},[s("v-card-title",[e._v("EMAIL :")]),s("v-card-text",[e._v(" "+e._s(e.user.email)+" ")])],1)],1),e.$vuetify.breakpoint.xsOnly?s("v-responsive",{attrs:{width:"100%"}}):e._e(),s("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[s("v-card",{attrs:{flat:""}},[s("v-card-title",[e._v("CREATED / UPDATED :")]),s("v-card-text",[e._v(" "+e._s(e.$date(e.user.created_at).format("DD/MM/YYYY HH:mm"))+" / "+e._s(e.$date(e.user.updated_at).format("DD/MM/YYYY HH:mm"))+" ")])],1)],1),e.$vuetify.breakpoint.xsOnly?s("v-responsive",{attrs:{width:"100%"}}):e._e()],1)],1)],1)],1)],1),s("v-row",{staticClass:"mb-4",attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12"}},[s("v-card",[s("v-card-text",[s("v-text-field",{attrs:{"append-icon":"mdi-database-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1)],1),s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{col:"12"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.daftar_permissions,search:e.search,"item-key":"name","sort-by":"name","show-select":""},scopedSlots:e._u([{key:"item.actions",fn:function(t){var a=t.item;return[s("v-icon",{attrs:{small:"",loading:e.btnLoading,disabled:e.btnLoading},on:{click:function(t){return t.stopPropagation(),e.revoke(a)}}},[e._v(" mdi-delete ")])]}}]),model:{value:e.permissions_selected,callback:function(t){e.permissions_selected=t},expression:"permissions_selected"}})],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return t.stopPropagation(),e.close(t)}}},[e._v("KELUAR")]),s("v-btn",{attrs:{color:"blue darken-1",text:"",loading:e.btnLoading,disabled:e.btnLoading||!e.perm_selected.length>0},on:{click:function(t){return t.stopPropagation(),e.save(t)}}},[e._v(" SIMPAN ")])],1)],1)},i=[],n=(s("b0c0"),s("5530")),r=s("2f62"),o={name:"UserPermissions",data:function(){return{btnLoading:!1,headers:[{text:"NAMA PERMISSION",value:"name"},{text:"GUARD",value:"guard_name"},{text:"AKSI",value:"actions",sortable:!1,width:100}],search:"",perm_selected:[],perm_revoked:[]}},methods:{save:function(){var e=this;this.btnLoading=!0,this.$ajax.post("/system/users/storeuserpermissions",{user_id:this.user.id,chkpermission:this.permissions_selected},{headers:{Authorization:this.TOKEN}}).then((function(){e.close()})).catch((function(){e.btnLoading=!1}))},revoke:function(e){var t=this;this.btnLoading=!0,this.$ajax.post("/system/users/revokeuserpermissions",{user_id:this.user.id,name:e.name},{headers:{Authorization:this.TOKEN}}).then((function(){t.close()})).catch((function(){t.btnLoading=!1}))},close:function(){this.btnLoading=!1,this.permissions_selected=[],this.$emit("closeUserPermissions")}},props:{user:Object,daftarpermissions:Array,permissionsselected:Array},computed:Object(n["a"])({},Object(r["b"])("auth",{TOKEN:"Token"}),{daftar_permissions:function(){return this.daftarpermissions},permissions_selected:{get:function(){return this.perm_selected.length>0?this.perm_selected:this.permissionsselected},set:function(e){this.perm_selected=e}}})},d=o,l=s("2877"),c=s("6544"),u=s.n(c),h=s("8336"),m=s("b0af"),f=s("99d9"),p=s("62ad"),v=s("a523"),b=s("8fea"),g=s("132d"),_=s("6b53"),x=s("0fd9"),I=s("2fa4"),y=s("8654"),S=Object(l["a"])(d,a,i,!1,null,null,null);t["a"]=S.exports;u()(S,{VBtn:h["a"],VCard:m["a"],VCardActions:f["a"],VCardText:f["c"],VCardTitle:f["d"],VCol:p["a"],VContainer:v["a"],VDataTable:b["a"],VIcon:g["a"],VResponsive:_["a"],VRow:x["a"],VSpacer:I["a"],VTextField:y["a"]})},"2bfd":function(e,t,s){},"4bd4":function(e,t,s){"use strict";s("4de4"),s("7db0"),s("4160"),s("caad"),s("07ac"),s("2532"),s("159b");var a=s("5530"),i=s("58df"),n=s("7e2b"),r=s("3206");t["a"]=Object(i["a"])(n["a"],Object(r["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(e){var t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(e){var t=this,s=function(e){return e.$watch("hasError",(function(s){t.$set(t.errorBag,e._uid,s)}),{immediate:!0})},a={_uid:e._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?a.shouldValidate=e.$watch("shouldValidate",(function(i){i&&(t.errorBag.hasOwnProperty(e._uid)||(a.valid=s(e)))})):a.valid=s(e),a},validate:function(){return 0===this.inputs.filter((function(e){return!e.validate(!0)})).length},reset:function(){this.inputs.forEach((function(e){return e.reset()})),this.resetErrorBag()},resetErrorBag:function(){var e=this;this.lazyValidation&&setTimeout((function(){e.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(e){return e.resetValidation()})),this.resetErrorBag()},register:function(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister:function(e){var t=this.inputs.find((function(t){return t._uid===e._uid}));if(t){var s=this.watchers.find((function(e){return e._uid===t._uid}));s&&(s.valid(),s.shouldValidate()),this.watchers=this.watchers.filter((function(e){return e._uid!==t._uid})),this.inputs=this.inputs.filter((function(e){return e._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(e){var t=this;return e("form",{staticClass:"v-form",attrs:Object(a["a"])({novalidate:!0},this.attrs$),on:{submit:function(e){return t.$emit("submit",e)}}},this.$slots.default)}})},"8e9a":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("AdminLayout",[s("ModuleHeader",{scopedSlots:e._u([{key:"icon",fn:function(){return[e._v(" mdi-account ")]},proxy:!0},{key:"name",fn:function(){return[e._v(" USERS ORGANISASI BANTUAN HUKUM ")]},proxy:!0},{key:"breadcrumbs",fn:function(){return[s("v-breadcrumbs",{staticClass:"pa-0",attrs:{items:e.breadcrumbs},scopedSlots:e._u([{key:"divider",fn:function(){return[s("v-icon",[e._v("mdi-chevron-right")])]},proxy:!0}])})]},proxy:!0},{key:"desc",fn:function(){return[s("v-alert",{attrs:{color:"cyan",border:"left","colored-border":"",type:"info"}},[e._v(" User dengan role OBH bertanggungjawab terhadap proses konsultasi hukum. ")])]},proxy:!0}])}),s("v-container",{attrs:{fluid:""}},[s("v-row",{staticClass:"mb-4",attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12"}},[s("v-card",[s("v-card-text",[s("v-text-field",{attrs:{"append-icon":"mdi-database-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1)],1),s("v-row",{staticClass:"mb-4",attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.daftar_users,search:e.search,"item-key":"id","sort-by":"name","show-expand":"",expanded:e.expanded,"single-expand":!0,loading:e.datatableLoading,"loading-text":"Loading... Please wait"},on:{"update:expanded":function(t){e.expanded=t},"click:row":e.dataTableRowClicked},scopedSlots:e._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:"",color:"white"}},[s("v-toolbar-title",[e._v("DAFTAR USERS OBH")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),e.$store.getters["auth/can"]("USER_STOREPERMISSIONS")?s("v-btn",{staticClass:"mb-2 mr-2",attrs:{color:"warning",loading:e.btnLoading,disabled:e.btnLoading},on:{click:function(t){return t.stopPropagation(),e.syncPermission(t)}}},[e._v(" SYNC PERMISSION ")]):e._e(),s("v-btn",{staticClass:"mb-2",attrs:{color:"primary",loading:e.btnLoading,disabled:e.btnLoading},on:{click:function(t){return t.stopPropagation(),e.showDialogTambahUserOBH(t)}}},[e._v(" TAMBAH ")]),s("v-dialog",{attrs:{"max-width":"500px",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-form",{ref:"frmdata",attrs:{"lazy-validation":""},model:{value:e.form_valid,callback:function(t){e.form_valid=t},expression:"form_valid"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),s("v-card-text",[s("v-text-field",{attrs:{label:"NAMA USER",outlined:"",rules:e.rule_user_name},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}}),s("v-text-field",{attrs:{label:"EMAIL",outlined:"",rules:e.rule_user_email},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}}),s("v-text-field",{attrs:{label:"NOMOR HP",outlined:"",rules:e.rule_user_nomorhp},model:{value:e.editedItem.nomor_hp,callback:function(t){e.$set(e.editedItem,"nomor_hp",t)},expression:"editedItem.nomor_hp"}}),s("v-text-field",{attrs:{label:"USERNAME",outlined:"",rules:e.rule_user_username},model:{value:e.editedItem.username,callback:function(t){e.$set(e.editedItem,"username",t)},expression:"editedItem.username"}}),s("v-text-field",{attrs:{label:"PASSWORD",type:"password",outlined:"",rules:e.rule_user_password},model:{value:e.editedItem.password,callback:function(t){e.$set(e.editedItem,"password",t)},expression:"editedItem.password"}}),s("v-autocomplete",{attrs:{items:e.daftar_roles,label:"ROLES",multiple:"","small-chips":"",rules:e.rule_user_roles,outlined:""},model:{value:e.editedItem.role_id,callback:function(t){e.$set(e.editedItem,"role_id",t)},expression:"editedItem.role_id"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return t.stopPropagation(),e.close(t)}}},[e._v("BATAL")]),s("v-btn",{attrs:{color:"blue darken-1",text:"",loading:e.btnLoading,disabled:!e.form_valid||e.btnLoading},on:{click:function(t){return t.stopPropagation(),e.save(t)}}},[e._v(" SIMPAN ")])],1)],1)],1)],1),s("v-dialog",{attrs:{"max-width":"500px",persistent:""},model:{value:e.dialogEdit,callback:function(t){e.dialogEdit=t},expression:"dialogEdit"}},[s("v-form",{ref:"frmdata",attrs:{"lazy-validation":""},model:{value:e.form_valid,callback:function(t){e.form_valid=t},expression:"form_valid"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),s("v-card-text",[s("v-text-field",{attrs:{label:"NAMA USER",outlined:"",rules:e.rule_user_name},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}}),s("v-text-field",{attrs:{label:"EMAIL",outlined:"",rules:e.rule_user_email},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}}),s("v-text-field",{attrs:{label:"NOMOR HP",outlined:"",rules:e.rule_user_nomorhp},model:{value:e.editedItem.nomor_hp,callback:function(t){e.$set(e.editedItem,"nomor_hp",t)},expression:"editedItem.nomor_hp"}}),s("v-text-field",{attrs:{label:"USERNAME",outlined:"",rules:e.rule_user_username},model:{value:e.editedItem.username,callback:function(t){e.$set(e.editedItem,"username",t)},expression:"editedItem.username"}}),s("v-text-field",{attrs:{label:"PASSWORD",type:"password",outlined:"",rules:e.rule_user_passwordEdit},model:{value:e.editedItem.password,callback:function(t){e.$set(e.editedItem,"password",t)},expression:"editedItem.password"}}),s("v-autocomplete",{attrs:{items:e.daftar_roles,label:"ROLES",multiple:"","small-chips":"",rules:e.rule_user_roles,outlined:""},model:{value:e.editedItem.role_id,callback:function(t){e.$set(e.editedItem,"role_id",t)},expression:"editedItem.role_id"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return t.stopPropagation(),e.close(t)}}},[e._v("BATAL")]),s("v-btn",{attrs:{color:"blue darken-1",text:"",loading:e.btnLoading,disabled:!e.form_valid||e.btnLoading},on:{click:function(t){return t.stopPropagation(),e.save(t)}}},[e._v("SIMPAN")])],1)],1)],1)],1),s("v-dialog",{attrs:{"max-width":"800px",persistent:""},model:{value:e.dialogUserPermission,callback:function(t){e.dialogUserPermission=t},expression:"dialogUserPermission"}},[s("UserPermissions",{attrs:{user:e.editedItem,daftarpermissions:e.daftar_permissions,permissionsselected:e.permissions_selected},on:{closeUserPermissions:e.closeUserPermissions}})],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var a=t.item;return[s("v-icon",{staticClass:"mr-2",attrs:{small:"",loading:e.btnLoading,disabled:e.btnLoading},on:{click:function(t){return t.stopPropagation(),e.setPermission(a)}}},[e._v(" mdi-axis-arrow-lock ")]),s("v-icon",{staticClass:"mr-2",attrs:{small:"",loading:e.btnLoading,disabled:e.btnLoading},on:{click:function(t){return t.stopPropagation(),e.editItem(a)}}},[e._v(" mdi-pencil ")]),s("v-icon",{attrs:{small:"",loading:e.btnLoading,disabled:e.btnLoading},on:{click:function(t){return t.stopPropagation(),e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}},{key:"item.foto",fn:function(t){var a=t.item;return[s("v-avatar",{attrs:{size:"30"}},[s("v-img",{attrs:{src:e.$api.url+"/"+a.foto}})],1)]}},{key:"expanded-item",fn:function(t){var a=t.headers,i=t.item;return[s("td",{staticClass:"text-center",attrs:{colspan:a.length}},[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("ID:")]),e._v(e._s(i.id)+" "),s("strong",[e._v("created_at:")]),e._v(e._s(e.$date(i.created_at).format("DD/MM/YYYY HH:mm"))+" "),s("strong",[e._v("updated_at:")]),e._v(e._s(e.$date(i.updated_at).format("DD/MM/YYYY HH:mm"))+" ")])],1)]}},{key:"no-data",fn:function(){return[e._v(" Data belum tersedia ")]},proxy:!0}])})],1)],1)],1)],1)},i=[],n=(s("4160"),s("c975"),s("a434"),s("b0c0"),s("159b"),s("5530")),r=(s("96cf"),s("1da1")),o=s("2f62"),d=s("a1b3"),l=s("e477"),c=s("1105"),u={name:"UsersOBH",created:function(){this.breadcrumbs=[{text:"HOME",disabled:!1,href:"/dashboard/"+this.ACCESS_TOKEN},{text:"USER SISTEM",disabled:!1,href:"/system-users"},{text:"USERS OBH",disabled:!0,href:"#"}],this.initialize()},data:function(){return{role_id:0,datatableLoading:!1,selectLoadingKec:!1,btnLoading:!1,headers:[{text:"",value:"foto"},{text:"USERNAME",value:"username",sortable:!0},{text:"NAME",value:"name",sortable:!0},{text:"EMAIL",value:"email",sortable:!0},{text:"NOMOR HP",value:"nomor_hp",sortable:!0},{text:"AKSI",value:"actions",sortable:!1,width:100}],expanded:[],search:"",daftar_users:[],daftar_permissions:[],permissions_selected:[],form_valid:!0,daftar_roles:[],dialog:!1,dialogEdit:!1,firstShowDialogEdit:!0,dialogUserPermission:!1,editedIndex:-1,editedItem:{id:0,username:"",password:"",name:"",email:"",nomor_hp:"",role_id:["obh"],created_at:"",updated_at:""},defaultItem:{id:0,username:"",password:"",name:"",email:"",nomor_hp:"",role_id:["obh"],created_at:"",updated_at:""},rule_user_name:[function(e){return!!e||"Mohon untuk di isi nama User !!!"},function(e){return/^[A-Za-z\s]*$/.test(e)||"Nama User hanya boleh string dan spasi"}],rule_user_email:[function(e){return!!e||"Mohon untuk di isi email User !!!"},function(e){return/.+@.+\..+/.test(e)||"Format E-mail harus benar"}],rule_user_nomorhp:[function(e){return!!e||"Nomor HP mohon untuk diisi !!!"},function(e){return/^\+[1-9]{1}[0-9]{1,14}$/.test(e)||"Nomor HP hanya boleh angka dan gunakan kode negara didepan seperti +6281214553388"}],rule_user_username:[function(e){return!!e||"Mohon untuk di isi username User !!!"},function(e){return/^[A-Za-z_]*$/.test(e)||"Username hanya boleh string dan underscore"}],rule_user_password:[function(e){return!!e||"Mohon untuk di isi password User !!!"},function(e){return!(e&&"undefined"!==typeof e&&e.length>0)||(e.length>=8||"Minimial Password 8 karaketer")}],rule_user_passwordEdit:[function(e){return!(e&&"undefined"!==typeof e&&e.length>0)||(e.length>=8||"Minimial Password 8 karaketer")}],rule_user_roles:[function(e){return!!e||"Mohon untuk dipilih role user ini !!!"}]}},methods:{initialize:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.datatableLoading=!0,e.next=3,this.$ajax.get("/system/usersobh",{headers:{Authorization:this.TOKEN}}).then((function(e){var s=e.data;t.daftar_users=s.users,t.role_id=s.role.id,t.datatableLoading=!1}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),dataTableRowClicked:function(e){e===this.expanded[0]?this.expanded=[]:this.expanded=[e]},syncPermission:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.btnLoading=!0,e.next=3,this.$ajax.post("/system/users/syncallpermissions",{role_name:"obh"},{headers:{Authorization:this.$store.getters["auth/Token"]}}).then((function(){t.btnLoading=!1})).catch((function(){t.btnLoading=!1}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showDialogTambahUserOBH:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$ajax.get("/system/setting/roles",{headers:{Authorization:this.TOKEN}}).then((function(e){var s=e.data,a=s.roles,i=[];a.forEach((function(e){"obh"==e.name&&i.push({text:e.name,disabled:!0})})),t.daftar_roles=i,t.dialog=!0}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),editItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.editedIndex=this.daftar_users.indexOf(t),t.password="",this.editedItem=Object.assign({},t),e.next=5,this.$ajax.get("/system/setting/roles",{headers:{Authorization:this.TOKEN}}).then((function(e){var t=e.data,a=t.roles,i=[];a.forEach((function(e){"obh"==e.name&&i.push({text:e.name,disabled:!0})})),s.daftar_roles=i}));case 5:return this.btnLoading=!0,e.next=8,this.$ajax.get("/system/users/"+t.id+"/roles",{headers:{Authorization:this.TOKEN}}).then((function(e){var t=e.data;s.editedItem.role_id=t.roles,s.btnLoading=!1,s.dialogEdit=!0}));case 8:this.firstShowDialogEdit=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setPermission:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.btnLoading=!0,this.$ajax.get("/system/setting/roles/"+this.role_id+"/permission",{headers:{Authorization:this.TOKEN}}).then((function(e){var t=e.data;s.daftar_permissions=t.permissions})).catch((function(){s.btnLoading=!1})),e.next=4,this.$ajax.get("/system/users/"+t.id+"/permission",{headers:{Authorization:this.TOKEN}}).then((function(e){var t=e.data;s.permissions_selected=t.permissions,s.btnLoading=!1})).catch((function(){s.btnLoading=!1}));case 4:this.dialogUserPermission=!0,this.editedItem=t;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),close:function(){var e=this;this.btnLoading=!1,this.dialog=!1,this.dialogEdit=!1,this.firstShowDialogEdit=!0,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1,e.$refs.frmdata.reset()}),300)},closeUserPermissions:function(){this.btnLoading=!1,this.permissions_selected=[],this.dialogUserPermission=!1},save:function(){var e=this;this.$refs.frmdata.validate()&&(this.btnLoading=!0,this.editedIndex>-1?this.$ajax.post("/system/usersobh/"+this.editedItem.id,{_method:"PUT",name:this.editedItem.name,email:this.editedItem.email,nomor_hp:this.editedItem.nomor_hp,username:this.editedItem.username,password:this.editedItem.password,role_id:JSON.stringify(Object.assign({},this.editedItem.role_id))},{headers:{Authorization:this.TOKEN}}).then((function(t){var s=t.data;Object.assign(e.daftar_users[e.editedIndex],s.user),e.close()})).catch((function(){e.btnLoading=!1})):this.$ajax.post("/system/usersobh/store",{name:this.editedItem.name,email:this.editedItem.email,nomor_hp:this.editedItem.nomor_hp,username:this.editedItem.username,password:this.editedItem.password,role_id:JSON.stringify(Object.assign({},this.editedItem.role_id))},{headers:{Authorization:this.TOKEN}}).then((function(t){var s=t.data;e.daftar_users.push(s.user),e.close()})).catch((function(){e.btnLoading=!1})))},deleteItem:function(e){var t=this;this.$root.$confirm.open("Delete","Apakah Anda ingin menghapus username "+e.username+" ?",{color:"red"}).then((function(s){s&&(t.btnLoading=!0,t.$ajax.post("/system/usersobh/"+e.id,{_method:"DELETE"},{headers:{Authorization:t.TOKEN}}).then((function(){var s=t.daftar_users.indexOf(e);t.daftar_users.splice(s,1),t.btnLoading=!1})).catch((function(){t.btnLoading=!1})))}))}},computed:Object(n["a"])({formTitle:function(){return-1===this.editedIndex?"TAMBAH USER OBH":"EDIT USER OBH"}},Object(o["b"])("auth",{ACCESS_TOKEN:"AccessToken",TOKEN:"Token"})),watch:{dialog:function(e){e||this.close()},dialogEdit:function(e){e||this.close()}},components:{AdminLayout:d["a"],ModuleHeader:l["a"],UserPermissions:c["a"]}},h=u,m=s("2877"),f=s("6544"),p=s.n(f),v=s("0798"),b=s("c6a6"),g=s("8212"),_=s("2bc5"),x=s("8336"),I=s("b0af"),y=s("99d9"),S=s("62ad"),w=s("a523"),k=s("8fea"),O=s("169a"),E=s("ce7e"),A=s("4bd4"),L=s("132d"),$=s("adda"),T=s("0fd9"),D=s("2fa4"),M=s("8654"),C=s("71d9"),V=s("2a7f"),P=Object(m["a"])(h,a,i,!1,null,null,null);t["default"]=P.exports;p()(P,{VAlert:v["a"],VAutocomplete:b["a"],VAvatar:g["a"],VBreadcrumbs:_["a"],VBtn:x["a"],VCard:I["a"],VCardActions:y["a"],VCardText:y["c"],VCardTitle:y["d"],VCol:S["a"],VContainer:w["a"],VDataTable:k["a"],VDialog:O["a"],VDivider:E["a"],VForm:A["a"],VIcon:L["a"],VImg:$["a"],VRow:T["a"],VSpacer:D["a"],VTextField:M["a"],VToolbar:C["a"],VToolbarTitle:V["a"]})},c6a6:function(e,t,s){"use strict";s("4de4"),s("7db0"),s("c975"),s("d81d"),s("45fc"),s("498a");var a=s("5530"),i=(s("2bfd"),s("b974")),n=s("8654"),r=s("d9f7"),o=s("80d2"),d=Object(a["a"])({},i["b"],{offsetY:!0,offsetOverflow:!0,transition:!1});t["a"]=i["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:function(e,t,s){return s.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1}},hideNoData:Boolean,menuProps:{type:i["a"].options.props.menuProps.type,default:function(){return d}},noFilter:Boolean,searchInput:{type:String,default:void 0}},data:function(){return{lazySearch:this.searchInput}},computed:{classes:function(){return Object(a["a"])({},i["a"].options.computed.classes.call(this),{"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1})},computedItems:function(){return this.filteredItems},selectedValues:function(){var e=this;return this.selectedItems.map((function(t){return e.getValue(t)}))},hasDisplayedItems:function(){var e=this;return this.hideSelected?this.filteredItems.some((function(t){return!e.hasItem(t)})):this.filteredItems.length>0},currentRange:function(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems:function(){var e=this;return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter((function(t){var s=Object(o["r"])(t,e.itemText),a=null!=s?String(s):"";return e.filter(t,String(e.internalSearch),a)}))},internalSearch:{get:function(){return this.lazySearch},set:function(e){this.lazySearch=e,this.$emit("update:search-input",e)}},isAnyValueAllowed:function(){return!1},isDirty:function(){return this.searchIsDirty||this.selectedItems.length>0},isSearching:function(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps:function(){var e=i["a"].options.computed.$_menuProps.call(this);return e.contentClass="v-autocomplete__content ".concat(e.contentClass||"").trim(),Object(a["a"])({},d,{},e)},searchIsDirty:function(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem:function(){var e=this;return this.multiple?null:this.selectedItems.find((function(t){return e.valueComparator(e.getValue(t),e.getValue(e.internalValue))}))},listData:function(){var e=i["a"].options.computed.listData.call(this);return e.props=Object(a["a"])({},e.props,{items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch}),e}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused:function(e){e?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive:function(e){!e&&this.hasSlot&&(this.lazySearch=void 0)},items:function(e,t){t&&t.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!e.length||this.activateMenu()},searchInput:function(e){this.lazySearch=e},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created:function(){this.setSearch()},destroyed:function(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged:function(e,t){var s=this;e!==t&&(this.setMenuIndex(-1),this.$nextTick((function(){s.internalSearch&&(1===e.length||s.autoSelectFirst)&&(s.$refs.menu.getTiles(),s.setMenuIndex(0))})))},onInternalSearchChanged:function(){this.updateMenuDimensions()},updateMenuDimensions:function(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex:function(e){this.searchIsDirty||(this.multiple&&e===o["y"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&e===o["y"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:e!==o["y"].backspace&&e!==o["y"].delete||this.deleteCurrentItem())},deleteCurrentItem:function(){var e=this.selectedIndex,t=this.selectedItems[e];if(this.isInteractive&&!this.getDisabled(t)){var s=this.selectedItems.length-1;if(-1!==this.selectedIndex||0===s){var a=this.selectedItems.length,i=e!==a-1?e:e-1,n=this.selectedItems[i];n?this.selectItem(t):this.setValue(this.multiple?[]:void 0),this.selectedIndex=i}else this.selectedIndex=s}},clearableCallback:function(){this.internalSearch=void 0,i["a"].options.methods.clearableCallback.call(this)},genInput:function(){var e=n["a"].options.methods.genInput.call(this);return e.data=Object(r["a"])(e.data,{attrs:{"aria-activedescendant":Object(o["p"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(o["p"])(e.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),e},genInputSlot:function(){var e=i["a"].options.methods.genInputSlot.call(this);return e.data.attrs.role="combobox",e},genSelections:function(){return this.hasSlot||this.multiple?i["a"].options.methods.genSelections.call(this):[]},onClick:function(e){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(e.target)||this.activateMenu())},onInput:function(e){if(!(this.selectedIndex>-1)&&e.target){var t=e.target,s=t.value;t.value&&this.activateMenu(),this.internalSearch=s,this.badInput=t.validity&&t.validity.badInput}},onKeyDown:function(e){var t=e.keyCode;i["a"].options.methods.onKeyDown.call(this,e),this.changeSelectedIndex(t)},onSpaceDown:function(e){},onTabDown:function(e){i["a"].options.methods.onTabDown.call(this,e),this.updateSelf()},onUpDown:function(e){e.preventDefault(),this.activateMenu()},selectItem:function(e){i["a"].options.methods.selectItem.call(this,e),this.setSearch()},setSelectedItems:function(){i["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch:function(){var e=this;this.$nextTick((function(){e.multiple&&e.internalSearch&&e.isMenuActive||(e.internalSearch=!e.selectedItems.length||e.multiple||e.hasSlot?null:e.getText(e.selectedItem))}))},updateSelf:function(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem:function(e){return this.selectedValues.indexOf(this.getValue(e))>-1},onCopy:function(e){if(-1!==this.selectedIndex){var t=this.selectedItems[this.selectedIndex],s=this.getText(t);e.clipboardData.setData("text/plain",s),e.clipboardData.setData("text/vnd.vuetify.autocomplete.item+plain",s),e.preventDefault()}}}})}}]);